function initWebCam(){canvas=document.getElementById("snapshotCanvas");ctx=canvas.getContext("2d");document.getElementById("webcamOnOffBtn").textContent="Turn webcam On"}function startWebcam(){navigator.getUserMedia?navigator.getUserMedia({video:!0,audio:!1},function(n){video=document.querySelector("video");video.srcObject=n;webcamStream=n.getTracks()[0];var t=document.getElementById("webcamOnOffBtn");t.textContent="Turn webcam Off"},function(n){console.log("The following error occured: "+n)}):console.log("getUserMedia not supported")}function stopWebcam(){webcamStream!=undefined&&webcamStream.stop()}function snapshot(){if(webcamStream==undefined){ctx.clearRect(0,0,canvas.width,canvas.height);return}var t=webcamStream.getSettings().aspectRatio,i=canvas.width,n=canvas.width/t,r=(canvas.height-n)/2;ctx.drawImage(video,0,r,i,n)}function webcamToggle(){if(webcamStream==undefined&&startWebcam(),webcamStream){stopWebcam();var n=document.getElementById("webcamOnOffBtn");n.textContent="Turn webcam On";webcamStream=undefined}}function uploadCurrentSnapshot(){var t=document.getElementById("upload-current-snapshot-status"),n;t.innerHTML="Uploading...";n={RawImg:canvas.toDataURL()};$.ajax({type:"POST",url:"/Photoroom/UploadImgRaw",dataType:"text",contentType:"application/json",data:JSON.stringify(n),success:function(){}})}function overlayImg(n){var t=document.getElementById("snapshotCanvas"),i=t.getContext("2d");i.drawImage(n,0,0)}function createSideImg(n,t){var i=new Image;i.classList.add("side-img");i.src=n;i.onclick=function(){overlayImg(this)};t.appendChild(i)}var video,webcamStream,canvas,ctx;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;