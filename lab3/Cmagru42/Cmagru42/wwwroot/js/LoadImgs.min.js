function loadNewImgs(n){var i={PhotosIds:loadedImgsIds,RequiredImgs:n},t=document.createElement("div");imgsHolder.appendChild(t);$.ajax({type:"POST",url:"/PhotoWall/GetNewImgs",dataType:"json",contentType:"application/json",data:JSON.stringify(i),success:function(n){var u,i,r;if(n.success)for(u=0;u<n.imgs.length;u++)i=n.imgs[u],r=imgTemplate.content.cloneNode(!0),r.querySelector(".grid-image").src=i.imgBase64,r.querySelector(".likes-count").innerHTML=i.likes,r.querySelector(".comments-count").innerHTML=i.comments,r.querySelector(".grid-element").id=i.imgId,r.id=i.imgId,t.appendChild(r),loadedImgsIds.push(i.imgId);else imgsHolder.removeChild(t);onLoadImgsEnd()},error:function(){onLoadImgsEnd()}})}function initPhotoWall(){imgTemplate=document.getElementById("grid-image-template");imgsHolder=document.getElementById("grid-images");moreImgsBtn=document.getElementById("more-imgs-btn");loadingImgsMsgP=document.getElementById("loading-img-msg")}function loadImages(n){for(var i=loadedImgsIds.length,r=[],t=i;t<n+i;t++)r.push(t);onLoadImgsStart();loadNewImgs(r)}function onLoadImgsStart(){loadingImgsMsgP.innerHTML="Loading..."}function onLoadImgsEnd(){loadingImgsMsgP.innerHTML=""}var loadedImgsIds=[],imgTemplate,imgsHolder,deltaImgsToLoad=5,moreImgsBtn,loadingImgsMsgP;