function loadNewImg(n){var i={PhotosIds:loadedImgsIds,RequiredImg:n},t=document.createElement("div");t.id="display-img-"+n;imgsHolder.appendChild(t);$.ajax({type:"POST",url:"/PhotoWall/GetNewImg",dataType:"json",contentType:"application/json",data:JSON.stringify(i),success:function(n){if(t=document.getElementById("display-img-"+n.imgNb),n.success){var i=imgTemplate.content.cloneNode(!0);i.querySelector(".grid-image").src=n.imgBase64;i.querySelector(".likes-count").innerHTML=n.likes;i.querySelector(".grid-element").id=n.imgId;i.id=n.imgId;t.appendChild(i);loadedImgsIds.push(n.imgId)}else imgsHolder.removeChild(t);requestStatuses[n.imgNb]=!0;loadImgsRequestsFinished()&&onLoadImgsEnd()},error:function(){requestStatuses[result.imgNb]=!0;loadImgsRequestsFinished()&&onLoadImgsEnd()}})}function initPhotoWall(){imgTemplate=document.getElementById("grid-image-template");imgsHolder=document.getElementById("grid-images");moreImgsBtn=document.getElementById("more-imgs-btn");loadingImgsMsgP=document.getElementById("loading-img-msg")}function loadImages(n){var i=loadedImgsIds.length,t;for(onLoadImgsStart(),t=i;t<n+i;t++)requestStatuses[t]=!1,loadNewImg(t)}function loadImgsRequestsFinished(){for(var n=0;n<requestStatuses.length;n++)if(requestStatuses[n]==!1)return!1;return!0}function onLoadImgsStart(){loadingImgsMsgP.innerHTML="Loading..."}function onLoadImgsEnd(){loadingImgsMsgP.innerHTML=""}var loadedImgsIds=[],imgTemplate,imgsHolder,deltaImgsToLoad=5,moreImgsBtn,loadingImgsMsgP,requestStatuses={};